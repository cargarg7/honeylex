#
# Honeylex default services configuration
---
honeybee.environment:
  class: Honeylex\Environment
  provisioner:
    class: Honeylex\Service\Provisioner\EnvironmentProvisioner

honeybee.infrastructure.template_renderer:
  class: Honeylex\Renderer\Twig\TwigRenderer
  provisioner:
    class: Honeylex\Service\Provisioner\TwigRendererProvisioner
    settings:
      extensions:
        - Honeylex\Renderer\Twig\Extension\ProjectExtension
        - Honeylex\Renderer\Twig\Extension\WorkflowExtension
        - Honeylex\Renderer\Twig\Extension\LocaliseRouteExtension

honeybee.infrastructure.mail_service:
  class: Honeylex\Mail\SwiftMailer\LoggingSwiftMailer
  provisioner:
    class: Honeylex\Service\Provisioner\MailServiceProvisioner

honeybee.infrastructure.connector_service:
  class: Honeybee\Infrastructure\DataAccess\Connector\ConnectorService
  provisioner:
    class: Honeylex\Service\Provisioner\ConnectorServiceProvisioner

honeybee.infrastructure.data_access_service:
  class: Honeybee\Infrastructure\DataAccess\DataAccessService
  provisioner:
    class: Honeylex\Service\Provisioner\DataAccessServiceProvisioner

honeybee.infrastructure.migration_service:
  class: Honeybee\Infrastructure\Migration\MigrationService
  provisioner:
    class: Honeylex\Service\Provisioner\MigrationServiceProvisioner

honeybee.infrastructure.fixture_service:
  class: Honeybee\Infrastructure\Fixture\FixtureService
  provisioner:
    class: Honeylex\Service\Provisioner\FixtureServiceProvisioner

honeybee.infrastructure.expression_service:
  class: Honeybee\Infrastructure\Expression\ExpressionService
  provisioner:
    class: Honeylex\Service\Provisioner\ExpressionServiceProvisioner

honeybee.infrastructure.event_bus:
  class: Honeybee\Infrastructure\Event\Bus\EventBus
  provisioner:
    class: Honeylex\Service\Provisioner\EventBusProvisioner

honeybee.infrastructure.command_bus:
  class: Honeybee\Infrastructure\Command\Bus\CommandBus
  provisioner:
    class: Honeylex\Service\Provisioner\CommandBusProvisioner

honeybee.infrastructure.filesystem_service:
  class: Honeybee\Infrastructure\Filesystem\FilesystemService
  provisioner:
    class: Honeylex\Service\Provisioner\FilesystemServiceProvisioner

honeybee.infrastructure.job_service:
  class: Honeybee\Infrastructure\Job\JobService
  provisioner:
    class: Honeylex\Service\Provisioner\JobServiceProvisioner
    settings:
      connection: honeybee.msg_queue

honeybee.infrastructure.command_enricher:
  class: Honeybee\Infrastructure\Command\CommandEnricher
  provisioner:
    class: Honeylex\Service\Provisioner\CommandEnricherProvisioner
    settings:
      enrichers:
        - Hlx\Security\User\AuditMetadataEnricher

honeybee.infrastructure.state_machine_builder:
  class: Honeybee\Infrastructure\Workflow\StateMachineBuilder
  provisioner:
    class: Honeylex\Service\Provisioner\StateMachineBuilderProvisioner
    
honeybee.infrastructure.workflow_service:
  class: Honeybee\Infrastructure\Workflow\WorkflowService
  provisioner:
    class: Honeylex\Service\Provisioner\WorkflowServiceProvisioner

honeylex.url_generator:
  class: Symfony\Component\Routing\Generator\UrlGenerator
  provisioner:
    class: Honeylex\Service\Provisioner\SilexServiceProvisioner
    settings:
      app_key: url_generator
      share: true
      alias: Symfony\Component\Routing\Generator\UrlGeneratorInterface

honeylex.form_factory:
  class: Symfony\Component\Form\FormFactory
  provisioner:
    class: Honeylex\Service\Provisioner\SilexServiceProvisioner
    settings:
      app_key: form.factory
      share: true
      alias: Symfony\Component\Form\FormFactoryInterface

honeylex.validator:
  class: Symfony\Component\Validator\Validator\Validator
  provisioner:
    class: Honeylex\Service\Provisioner\SilexServiceProvisioner
    settings:
      app_key: validator
      share: true
      alias: Symfony\Component\Validator\Validator\ValidatorInterface

honeylex.request_stack:
  class: Symfony\Component\HttpFoundation\RequestStack
  provisioner:
    class: Honeylex\Service\Provisioner\SilexServiceProvisioner
    settings:
      app_key: request_stack
      share: true

honeylex.translator:
  class: Symfony\Component\Translation\Translator
  provisioner:
    class: Honeylex\Service\Provisioner\TranslationServiceProvisioner
    settings:
      alias: Symfony\Component\Translation\TranslatorInterface

honeylex.dispatcher:
  class: Symfony\Component\EventDispatcher\EventDispatcher
  provisioner:
    class: Honeylex\Service\Provisioner\SilexServiceProvisioner
    settings:
      app_key: dispatcher
      share: true
      alias: Symfony\Component\EventDispatcher\EventDispatcherInterface

honeylex.serializer:
  class: Symfony\Component\Serializer\Serializer
  provisioner:
    class: Honeylex\Service\Provisioner\SerializerServiceProvisioner
    settings:
      normalizers:
        - Honeylex\Serializer\ProjectionNormalizer
